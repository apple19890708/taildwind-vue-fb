import{s as b,r as p,a as w,c as d,f as y,b as e,w as u,B as x,n as k,u as a,F as m,d as N,i as C,v as V,E as F,G as P,o as c,g as v}from"./index.c97a5ce1.js";import{_ as j}from"./CardTitle.1129af28.js";import{b as B}from"./apiPost.c457e9a8.js";const D={class:"rounded-lg border-2 border-black bg-white p-8 shadow-post"},H=e("p",null,"\u8CBC\u6587\u5167\u5BB9",-1),T={class:"relative my-4 w-32 gap-y-8 rounded bg-black py-1 px-8 text-white"},W=["accept"],z=e("span",null,"\u4E0A\u50B3\u5716\u7247",-1),E=["src"],G={class:"text-center"},I={class:"text-red_x -mt-2 mb-2 mb-1 text-sm"},L=v(" \u5716\u7247\u6A94\u6848\u904E\u5927\uFF0C\u50C5\u9650 1mb \u4EE5\u4E0B\u6A94\u6848"),R=e("br",null,null,-1),S=v("\u5716\u7247\u683C\u5F0F\u932F\u8AA4\uFF0C\u50C5\u9650 JPG\u3001PNG \u5716\u7247 "),U=[L,R,S],q={setup($){b();const n=p(),i=p(""),f=P(),g={contentLength:1,fileNum:10,fileSize:1024*1024,fileType:["image/jpg","image/jpeg","image/png"]},r=w({isWarnHint:!1,previews:[],images:[]}),_=o=>{if(!!n.value.files)for(const t of n.value.files){const s=new FileReader;s.onload=l=>{r.previews.push(l.target.result)},s.readAsDataURL(t),r.images.push(t)}},h=async()=>{r.isWarnHint=!0;try{const o=new FormData;o.append("content",i.value),r.images.forEach(s=>{o.append("photos",s)});const t=await B(o);f.push({name:"post"})}catch(o){console.log("error",o)}};return(o,t)=>(c(),d(m,null,[y(j,{title:"\u5F35\u8CBC\u52D5\u614B"}),e("div",D,[H,u(e("textarea",{name:"postContent",rows:"6",placeholder:"\u8F38\u5165\u60A8\u7684\u8CBC\u6587\u5167\u5BB9",class:"mt-1 w-full rounded-none border-2 px-4 py-3 focus:border-black focus:shadow-transparent",onFocus:t[0]||(t[0]=s=>o.isWarnHint=!1),"onUpdate:modelValue":t[1]||(t[1]=s=>i.value=s)},null,544),[[x,i.value]]),e("div",T,[e("input",{ref_key:"uploadImages",ref:n,type:"file",accept:g.fileType.join(", "),class:"absolute left-0 z-10 w-full cursor-pointer opacity-0",onChange:_,multiple:""},null,40,W),z]),e("div",{class:k([{"items-center justify-center py-4":a(r).previews.length===0,"grid-cols-2":a(r).previews.length>1},"mb-4 grid w-full overflow-hidden rounded-lg border-2 border-black"])},[a(r).previews.length>0?(c(!0),d(m,{key:0},N(a(r).previews,(s,l)=>(c(),d("div",{class:"relative aspect-video hover:brightness-110",key:l},[e("img",{src:s},null,8,E)]))),128)):C("",!0)],2),e("div",G,[u(e("div",I,U,512),[[V,o.isWarnHint]]),e("button",{class:"rounded-lg border-2 border-black bg-subtitle py-3 px-32 font-semibold hover:bg-warning hover:text-black hover:shadow-btn",onClick:t[2]||(t[2]=F(s=>h(),["prevent"]))}," \u9001\u51FA\u8CBC\u6587 ")])])],64))}};export{q as default};
