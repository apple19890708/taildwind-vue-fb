import{r as n,L as b,o as r,c as i,e as u,u as h,a as s,n as p,I as y,s as L,g as w,w as x,h as $,F as v,d as P,j,k as C,N as T}from"./index.969468d0.js";import{_ as U}from"./CardTitle.1dab35c3.js";import{d as B,_ as I}from"./UserInfo.a57d2548.js";import{I as V}from"./IconArrowRight.64783802.js";import{c as N}from"./apiPost.0b5cb8dd.js";import{P as A}from"./PostEmptyCard.bde71a3d.js";const E={class:"flex gap-10"},F=["disabled"],R=s("span",null,"\u53D6\u6D88",-1),S=s("span",null,"\u67E5\u770B",-1),z={props:{item:{type:Object,default(){return{}}}},emits:["get-likes"],setup(a,{emit:d}){n([]);const e=n(!1),o=b(),c=n(!1),l=async f=>{e.value=!0;try{const t=await N(f);e.value=!1,d("get-likes")}catch(t){console.log("error",t),e.value=!1}};return(f,t)=>{var m,g,k;return r(),i("div",{class:p(["flex justify-between rounded-lg border-2 border-black bg-white py-5 pl-4 pr-10 shadow-post",{"animate-pulse":c.value}])},[u(I,{name:(m=a.item.user)==null?void 0:m.name,subTitle:`\u767C\u6587\u6642\u9593\uFF1A${h(B)(a.item.createdAt)}`,userPageUrl:`/profile/${(g=a.item.user)==null?void 0:g._id}`,imgUrl:(k=a.item.user)==null?void 0:k.photo},null,8,["name","subTitle","userPageUrl","imgUrl"]),s("ul",E,[s("li",null,[s("button",{type:"button",class:p(["flex flex-col items-center justify-center gap-1",{"cursor-not-allowed":e.value}]),disabled:e.value,onClick:t[0]||(t[0]=_=>l(a.item._id))},[u(y,{class:"h-5 w-5 text-primary"}),R],10,F)]),s("li",null,[s("button",{type:"button",class:"flex flex-col items-center justify-center gap-1",onClick:t[1]||(t[1]=_=>h(o).push(`/post/${a.item._id}`))},[u(V,{class:"h-5 w-5"}),S])])])],2)}}},D={key:0},G=s("p",{class:"p-8 text-center text-subtitle"}," \u76EE\u524D\u5C1A\u7121\u6309\u8B9A\u6587\u7AE0\uFF0C\u6309\u8B9A\u4E00\u5247\u8CBC\u6587\u5427\uFF01 ",-1),Q={setup(a){const d=L(),e=n(!1),o=n([]),c=async()=>{e.value=!0;try{const l=await T();console.log("res.likeList",l),l.data.status==="success"&&(o.value=l.data.likeList),e.value=!1}catch{d.error("\u8B80\u53D6\u6309\u8B9A\u5217\u8868\u5931\u6557"),console.log(err),e.value=!1}};return w(()=>{c()}),(l,f)=>(r(),i(v,null,[u(U,{title:"\u6211\u6309\u8B9A\u7684\u8CBC\u6587"}),x(s("div",null,[o.value.length>0?(r(),i("ul",D,[(r(!0),i(v,null,P(o.value,(t,m)=>(r(),i("li",{key:t._id,class:p({"mb-2":m<o.value.length-1})},[u(z,{item:t,onGetLikes:c},null,8,["item"])],2))),128))])):(r(),j(A,{key:1},{default:C(()=>[G]),_:1}))],512),[[$,!e.value]])],64))}};export{Q as default};
